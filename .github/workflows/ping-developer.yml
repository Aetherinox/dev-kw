# ---------------------------------------------------------------------------------------
#   @parent     : github workflow
#   @desc       : pings the developer
#   @author     : Aetherinox
#   @url        : https://github.com/Aetherinox
# ---------------------------------------------------------------------------------------

name: "üé´ Ping ‚Ä∫ Developer"
run-name: "üé´ Ping ‚Ä∫ Developer"

# ---------------------------------------------------------------------------------------
#   triggers
# ---------------------------------------------------------------------------------------

on:
  issue_comment:
    types: [created]

# ---------------------------------------------------------------------------------------
#   environment variables
# ---------------------------------------------------------------------------------------

env:
  LABEL_ACCEPT:         "Status êÑÇ Accepted"

  ASSIGN_USER:          Aetherinox
  BOT_NAME_1:           AdminServ
  BOT_NAME_2:           AdminServX
  BOT_NAME_3:           EuropaServ
  BOT_NAME_DEPENDABOT:  dependabot[bot]

# ---------------------------------------------------------------------------------------
#   jobs
#
#   env not available for job.if
# ---------------------------------------------------------------------------------------

jobs:
  deploy:
    runs-on: ubuntu-latest
    if: |
        contains(github.event.comment.body, '/ping')
    steps:

        # ---------------------------------------------------------------------------------------
        #   Add Label to accepted PR
        #
        #   port 465
        #       server_port: 465
        #       secure: true
        #       ignore_cert: false
        #
        #   port 587
        #       server_port: 587
        #       secure: false
        # ---------------------------------------------------------------------------------------

        - name: Send mail
          uses: dawidd6/action-send-mail@v3
          with:
                server_address: ${{secrets.EMAIL_SMTP}}
                server_port: 465
                secure: true
                username: ${{secrets.EMAIL_FROM}}
                password: ${{secrets.EMAIL_KEY}}
                subject: Test Email
                to: ${{secrets.EMAIL_TO}}
                from: ${{secrets.EMAIL_FROM}}
                body: Build job of ${{github.repository}} completed successfully!
                html_body: |
                  <html>
                    <body>
                        this is a text email
                    </body>
                  </html>
                ignore_cert: true
                convert_markdown: true
                priority: normal
