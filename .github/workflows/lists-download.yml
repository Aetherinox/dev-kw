# #
#   @type               github workflow
#   @desc               download AbuseIPDB ip list
#   @author             Aetherinox
#   @url                https://github.com/Aetherinox
# #

name: "âš¡ï¸Ž Lists â€º Download"
run-name: "âš¡ï¸Ž Lists â€º Download"

# #
#   triggers
# #

on:
    workflow_dispatch:

# #
#   environment variables
# #

env:
    BOT_NAME_1:           AdminServ
    BOT_NAME_2:           AdminServX
    BOT_NAME_3:           EuropaServ
    BOT_NAME_DEPENDABOT:  dependabot[bot]

# #
#   jobs
#
#   env not available for job.if
# #

jobs:
    deploy:
        runs-on: ubuntu-latest
        steps:

            # #
            #   Job > Complete > Get publish timestamp
            # #

            - name: "ðŸ•› Get Timestamp"
              id: task_complete_timestamp_get
              run: |
                echo "NOW=$(date +'%m-%d-%Y %H:%M:%S')" >> $GITHUB_ENV

            # #
            #   Add Label to accepted PR
            #
            #   port 465
            #       server_port: 465
            #       secure: true
            #       ignore_cert: false
            #
            #   port 587
            #       server_port: 587
            #       secure: false
            # #

            - uses: actions/checkout@v3

            - run: |
                # make file runnable, might not be necessary
                ls -a
                dir
                echo ${GITHUB_WORKSPACE}
                chmod +x ".github/scripts/lists-download.sh"
                bash ".github/scripts/lists-download.sh"

                command=".github/scripts/lists-download.sh"
                eval "./$command"
                mv .github/scripts/csf.deny ${GITHUB_WORKSPACE}/

                ls
                cd .github
                ls
                cd scripts
                ls